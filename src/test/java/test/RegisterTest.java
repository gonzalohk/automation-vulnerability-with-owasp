package test;

import org.junit.After;
import org.junit.Assert;
import org.junit.Before;
import org.junit.Test;

import pages.*;
import session.Session;

import static configuration.Conf.APPLICATION_TO_TEST;

public class RegisterTest {
    private MainPage mainPage = new MainPage();
    private RegisterStepOnePage registerStepOnePage = new RegisterStepOnePage();
    private RegisterStepTwoPage registerStepTwoPage = new RegisterStepTwoPage();
    private SetupPage setupPage = new SetupPage();
    private StartPage startPage = new StartPage();

    @Before
    public void before(){
        Session.getInstance().getDriver().get(APPLICATION_TO_TEST);
    }

    @Test
    public void verifyTheLoginUsingUserAndPassword() throws InterruptedException {
        //Steps
        mainPage.registerButton.click();
        registerStepOnePage.emailTextField.type(System.currentTimeMillis() +"-user@gmail.net");
        registerStepOnePage.stepOneButton.click();
        registerStepTwoPage.nameTextField.type("Tester_User-"+System.currentTimeMillis());
        registerStepTwoPage.passwordTextField.type("pass13A!z");
        registerStepTwoPage.stepTwoButton.click();
        setupPage.letsGoButton.click();
        setupPage.createButton.click();
        setupPage.openButton.click();

        //verification
        Assert.assertTrue("Error, Register was not success",startPage.addTaskButton.isPresent());
    }

    @After
    public void after(){
        Session.getInstance().getDriver().close();
    }
}
