package test;

import io.qameta.allure.Description;
import io.qameta.allure.Owner;
import io.qameta.allure.junit4.DisplayName;
import org.junit.After;
import org.junit.Assert;
import org.junit.Before;
import org.junit.Test;
import pages.*;
import session.Session;

public class LoginTest{
    String applicationToTest;
    MainPage mainPage = new MainPage();
    RegisterStepOnePage registerStepOnePage = new RegisterStepOnePage();
    LoginPage loginPage = new LoginPage();
    RegisterStepTwoPage registerStepTwoPage = new RegisterStepTwoPage();
    SetupPage setupPage = new SetupPage();
    StartPage startPage = new StartPage();

    @Before
    public void before(){
        applicationToTest ="https://todoist.com/";
        Session.getInstance().getDriver().get(applicationToTest);
    }

    @After
    public void after(){
        Session.getInstance().getDriver().close();
    }

    @Test
    @DisplayName("Verify Login")
    @Description("This is a test case to verify login feature")
    @Owner("Gosco")
    public void verifyLoginUsingUserAndPassword() {
        //Steps
        mainPage.loginButton.click();
        loginPage.emailTextField.type("1602158042303-user@gmail.net");
        loginPage.passwordTextField.type("pass13A!z");
        loginPage.loginButton.click();

        //verification
        Assert.assertTrue("Error, Register was not success",startPage.addTaskButton.isPresent());
    }

    /*@Test
    @DisplayName("Register New User")
    @Description("This is a test case to create a new account feature")
    @Owner("Gosco")
    public void registerNewUser() throws InterruptedException {
        //Steps
        mainPage.registerButton.click();
        registerStepOnePage.emailTextField.type(System.currentTimeMillis() +"-user@gmail.com");
        registerStepOnePage.stepOneButton.click();
        registerStepTwoPage.nameTextField.type("Tester_User-"+System.currentTimeMillis());
        registerStepTwoPage.passwordTextField.type("pass13A!z");
        registerStepTwoPage.stepTwoButton.click();
        setupPage.letsGoButton.click();
        setupPage.createButton.click();
        setupPage.openButton.click();

        //verification
        //Assert.assertTrue("Error, Register was not success",startPage.addTaskButton.isPresent());
        startPage.configurationButton.click();
        startPage.logoutButton.click();
    }*/
}
